<!doctype html>
<html lang="sv-se">

<head>
    <meta charset="utf-8">

    <title>The Node plattform</title>

    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

    <link rel="icon" href="./images/favicon.png" type="image/png" />

    <link rel="stylesheet" href="./reveal.js/css/reveal.css">
    <link rel="stylesheet" href="./reveal.js/css/theme/black.css" id="theme">
    <link rel="stylesheet" href="./reveal.js/css/theme/black.lnu.css" id="theme">

    <!-- Code syntax highlighting -->
    <link rel="stylesheet" href="./reveal.js/lib/css/zenburn.css">

    <!-- Printing and PDF exports -->
    <script>
        var link = document.createElement('link');
        link.rel = 'stylesheet';
        link.type = 'text/css';
        link.href = window.location.search.match(/print-pdf/gi) ? 'css/print/pdf.css' : 'css/print/paper.css';
        document.getElementsByTagName('head')[0].appendChild(link);
    </script>

    <!--[if lt IE 9]>
    <script src="lib/js/html5shiv.js"></script>
    <![endif]-->
</head>

<body>

    <div class="reveal lnu">

        <!-- Any section element inside of this container is displayed as a slide -->
        <div class="slides">
            <!-- Start -->
            <section class="center" data-state="lnu-intro">
                <h3>The Node Plattform</h3>
                <h3>Learning Object</h3>
                <h1>Linnaeus University</h1>
                <div class="lnu-footer">
                    <img src="./images/lnu-logotype.png" />
                    <img src="./images/lnu-symbol.png" />
                </div>
            </section>

            <!-- CC -->
            <section data-state="lnu-cc">
                <h2>Licence for this work</h2>
                <p>
                    This work is produced by <a href="https://github.com/thajo" style="color: #333">John Häggerud</a> at Linnaeus University.
                </p>
                <p>All content in this work excluding photographs, icons, picture of course litterature and Linnaeus University logotype and symbol, is licensied under a
                <a rel="license" href="http://creativecommons.org/licenses/by/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by/4.0/80x15.png" /></a><br />Creative Commons Attribution 4.0 International License</a>.</p>
                <h4>You are free to </h4>
                <ul>
                    <li>copy and redistribute the material in any medium or format</li>
                    <li>spread the whole or parts of the content</li>
                    <li>show the whole or parts of the content publicly and digital</li>
                    <li>convert the content to another format</li>
                    <li>change the content</li>
                </ul>
                <p>
                    If you change the content do not use the photographs, icons, picture of the course literature or Linnaeus University logotype and symbol in your new work!
                </p>
                <p>
                    At all times you must give credit to: ”Linnaeus university” with the link <a style="color: #333" href="https://webbprogrammerare.se">https://webbprogrammerare.se</a> and to the Creative Common-license above.
                </p>
            </section>

            <!-- Course management -->

            <section data-markdown>
    					<script type="text/template">
                    ## Javascript everywhere!

                    * Browser, javascrip engines (V8, Chakra, SpiderMonkey...)
                    * JSON
                    * Node.js (V8)
              </script>
            </section>

            <section data-markdown>
              <script type="text/template">
                  ## What Node.js is?

                  * Not a framework!
                  * Not a web server!
                  * Is not just for Web Sites/Applications!
                  * It´s a plattform!
              </script>
            </section>

            <section data-markdown>
              <script type="text/template">
                  ## History of Node.js?

                  * Ryan Dahl, 2009
                  * Dropped out Math PhD, start coding web sites for money
                  * Why slow? Why high CPU usage?
                  * Flickr Image upload, AJAX long polling
                  * What language to use?
                    * Ruby, Python, Go, Haskell...
                    * Javascript! (V8, 2008)
                  * Six month, JSConf december 2009
                  * Joyent company

                  Ryan Dahl about node.js - [https://www.youtube.com/watch?v=SAc0vQCC6UQ](https://www.youtube.com/watch?v=SAc0vQCC6UQ)
                  The orginal presentation - [https://www.youtube.com/watch?v=ztspvPYybIY](https://www.youtube.com/watch?v=ztspvPYybIY)
              </script>
            </section>

            <section data-markdown>
              <script type="text/template">
                  ## node.js vs io.js

                  * fork
                  * Today

              </script>
            </section>


            <section data-markdown>
              <script type="text/template">
                  ## The Philosophy

                  * Small core
                  * Small modules/packages
                  * Small interfaces
                  * Simplicity and pragmatism

              </script>
            </section>
            <section>
              <section data-markdown>
                <script type="text/template">
                    ## NPM

                    Node Package Manager

                    * Bundled with node
                    * Easy for sharing and reusing javascript code
                    * packages/modules
                    * cli program
                      ```
                      npm install <module_name>
                      ```

                </script>
              </section>

              <section data-markdown class="center">
                <script type="text/template">
                    ## NPM - package.json
                    ![package.json](./images/package_json.png)

                    A meta file in our projects root folder

                    https://docs.npmjs.com/files/package.json
                </script>
              </section>

              <section data-markdown class="center">
                <script type="text/template">
                    ## NPM - installing modules
                    Use npm to install others modules into your project!

                    ```
                    npm install mocha --save-dev
                    ```
                    ![node_modules](./images/node_modules.png)

                    </script>
              </section>

              <section data-markdown class="center">
                <script type="text/template">
                    ## About node modules

                    * Add "node_modules" to your .gitignore
                    * Use require to use the modules in your code (after installing them)
                      * ```
                      var express = require("express");
                      var own = require("./realativ/path/to/my_module.js");
                      var fileSystem = require("fs"); // node core module
                      ```
                    * node will look for the local folder "node_modules" or globally in the directory node was installed
                    * modules are cached
                    https://docs.npmjs.com/misc/faq#should-i-check-my-node-modules-folder-into-git
                </script>
              </section>
          </section>

          <section>
            <section data-markdown>
              <script type="text/template">
                  ## How node works!

                  * Non-blocking
                  * Single threaded
                  * Asynchronous
                  * Event-driven
              </script>
            </section>

            <section data-markdown>
              <script type="text/template">
                  ## Blocking vs. Non-blocking

                  ```php
                  <?php
                    $homepage = file_get_contents('http://www.example.com/');
                    echo $homepage;
                  ?>
                  ```

                  ```javascript
                  var request = require('request');
                  request('http://www.example.com', function (error, response, body) {
                    if (!error &amp;&amp; response.statusCode == 200) {
                      console.log(body) // Show the HTML for the homepage.
                    }
                  });
                  // ... dont have to wait to do stuff here
                  ```
              </script>
            </section>

            <section data-markdown>
              <script type="text/template">
                  ## Multi threaded vs. single thread

                  * Synchronous single thread - One request at time
                  * Fork a process for each request
                  * Having a thread pool and use a thread for each request

              </script>
            </section>

            <section data-markdown>
              <script type="text/template">
                  ## The event loop
                  The event loop is the thing that handles and processes external events and converts them into callback calls

                  See the event loop as the thing that checks when stuff happends and that all register callbacks is called.
                  Since its single threaded the event loop can only process one task at the time
              </script>
            </section>

            <section data-markdown>
              <script type="text/template">
                  ##  Pros and cons

                  ### multi threaded

                  ```
                  // avoid if users big
                  function sortUsersByAge(users) {
                  	users.sort(function(a, b) {
                  		return a.age < b.age ? -1 : 1
                  	})
                  }

                  ```

                  // what if 15MB json?
                  ```
                  function requestHandler(req, res) {
                    var body = req.rawBody; // Contains the POST body
                    try {
                       var json = JSON.parse(body);
                       res.end(json.user.username);
                    }
                    catch(e) {
                       res.end("FAIL");
                    }
                  }
                  ```

              </script>
            </section>

            <section data-markdown>
              <script type="text/template">
                  ## Non-blocking model
                  Always program asynchronous!

                  * callbacks
                  * promises
                  * generators + promises
                  * "await and async" - for the future...
                  * Event Emitters
              </script>
            </section>
          </section>
        </div>
    </div>

    <!--
      https://www.youtube.com/watch?v=SAc0vQCC6UQ
    -->

    <script src="./reveal.js/lib/js/head.min.js"></script>
    <script src="./reveal.js/js/reveal.js"></script>

    <script>
        // Full list of configuration options available at:
        // https://github.com/hakimel/reveal.js#configuration
        Reveal.initialize({
            width: 1280,
            height: 800,
            controls: true,
            progress: true,
            history: true,
            center: false,

            transition: 'slide', // none/fade/slide/convex/concave/zoom

            // Optional reveal.js plugins
            dependencies: [
                { src: './reveal.js/lib/js/classList.js', condition: function () { return !document.body.classList; } },
                { src: './reveal.js/plugin/markdown/marked.js', condition: function () { return !!document.querySelector('[data-markdown]'); } },
                { src: './reveal.js/plugin/markdown/markdown.js', condition: function () { return !!document.querySelector('[data-markdown]'); } },
                { src: './reveal.js/plugin/highlight/highlight.js', async: true, condition: function () { return !!document.querySelector('pre code'); }, callback: function () { hljs.initHighlightingOnLoad(); } },
                { src: './reveal.js/plugin/zoom-js/zoom.js', async: true },
                { src: './reveal.js/plugin/notes/notes.js', async: true }
            ]
        });

    </script>

</body>
</html>
